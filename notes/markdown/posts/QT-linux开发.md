---
title: QT_linux开发
author: yuri2078
avatar: 'https://cdn.jsdelivr.net/gh/yuri2078/images/img/custom/avatar.jpg'
authorLink: 'https://2078.site'
authorAbout: 一般过路人
authorDesc: 一般过路人
categories: cpp
comments: true
description: '我的爱宛如孤岛之花，不为人知的绽放,不为人知的凋零！'
photos: 'https://cdn.jsdelivr.net/gh/yuri2078/images/headPictures/20.png'
date: 2022-08-04 19:16:50
tags: c/c++
keywords:
---
QT linux 开发 基于 ubantu 22.04

## 环境准备

### 软件安装

1. 下载Qt ``` https://download.qt.io ``` 选择 qt-opensource-linux-x64-5.14.2.run

2. 安装 ``` ls -l qt-opensource-linux-x64-5.14.2.run ``` 查看是否有可执行权限

3. 给权限 ``` chmod +x qt-opensource-linux-x64-5.14.2.run ```

4. 执行安装 ``` ./qt-opensource-linux-x64-5.14.2.run ``` 安装

### 环境配置

1. ``` home/yuri/rubbish/Qt/5.14.2/gcc_64/bin ```

2. ``` home/yuri/rubbish/Qt/Tools/QtCreator/bin ```

3. ``` sudo vi /etc/environment ``` 进入把两个目录粘贴进取 冒号隔开

4. ``` PATH="/home/yuri/rubbish/Qt/Tools/QtCreator/bin:/home/yuri/rubbish/Qt/5.14.2/gcc_64/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin" ```

### 测试qmake是否工作

1. 重新启动

2. 终端打开 ``` qmake -v ``` 输出版本号则成功

3. 打开qt 随便找一个看看能够运行

4. 如果不能 （报错 collect2:ld returned 1 exit status）

    1. ``` sudo apt-get update ```

    2. ``` sudo apt-get upgrade ```

    3. ``` sudo apt install libgl1-mesa-dev ```

## 一个QT程序

1. ``` mkdir hello ``` 找到一个文件夹存储项目

2. ``` vim main.cpp ``` 编辑代码

    ```cpp

    #include <QApplication>
    #include <QLabel>

    int main(int argc, char **argv)
    {
        //创建qt的应用程序对象
        QApplication app(argc,argv);
        QLabel *label_1 = new QLabel("你好，谢谢!");
        label_1->resize(800,800);
        label_1->show();
        return app.exec(); //让应用程序进入事件循环
    }

    ```

3. ``` qmake -project ``` 生成对应的pro文件

4. ``` vim hello.pro ``` 编辑文件 在顶部添加 QT += widgets 需要什么添加什么

    ```pro

        ######################################################################
        # Automatically generated by qmake (3.1) Wed Jul 13 23:33:22 2022
        ######################################################################

        QT += widgets
        TEMPLATE = app
        TARGET = hello
        INCLUDEPATH += .

        # You can make your code fail to compile if you use deprecated APIs.
        # In order to do so, uncomment the following line.
        # Please consult the documentation of the deprecated API in order to know
        # how to port your code away from it.
        # You can also select to disable deprecated APIs only up to a certain version of Qt.
        #DEFINES += QT_DISABLE_DEPRECATED_BEFORE=0x060000    # disables all the APIs deprecated before Qt 6.0.0

        # Input
        SOURCES += main.cpp

    ```

5. ``` qmake ``` 如果没有报错则连接成功 生成makefile文件

6. ``` make ``` 生成可执行文件

7. ``` ./hello ``` 执行文件

## ui文件的使用

1. 编辑ui文件，将类名改为你以后需要用到的类的名字

2. designer ...ui 可以直接用设计师打开ui文件

3. uic .ui -o ui_.h 转换ui文件为 h头文件

## qt常用重载函数

## qt常用事件

1. `paintEvent(QPaintEvent *);` 绘图事件

2. `voidkeyPressEvent(QKeyEvent *ev)` 键盘按下事件
